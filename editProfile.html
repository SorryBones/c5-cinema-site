
<!DOCTYPE html>
<html lang="en">

<head>
  <title>UGA Flix</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="style.css" rel="stylesheet">
  <script async src='/cdn-cgi/bm/cv/669835187/api.js'></script>
  <link href="https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <style>
  body {
    margin: 0;
    font-family: "Lexend Deca";
    background-color: black;
  }

 
  .responsive {
    width: 100%;
    height: auto;
  }
  </style>
</head>

<body style="padding-top:55px ; background-color: black">
  
  <!--Navbar-->
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark" style="background-color: #272727;">
    <a class="navbar-brand" href="index.html">UGA Flix</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <form action="/index.html">
            <input class="btn" type="submit" value="Home" style="background-color:#272727 ; color:white">
          </form>
          <form action="/browse.html">
            <input class="btn" type="submit" value="Browse" style="background-color:#272727 ; color:white">
          </form>
          <form action="/profile.html">
            <input class="btn" id="profileButton" type="submit" value="Profile" style="background-color:#272727 ; color:white">
          </form>
          <form action="/login.html">
            <input class="btn" id="loginButton" type="submit" value="Login" style="background-color:#272727 ; color:white">
          </form>
        </ul>
    </div>
  </nav>


<div id="aligncontainer">
  <ul class="sidebar">
    <li><a href="profile.html">Back to Profile</a></li>
    <li><a class="active" >Edit Profile</a></li>
  </ul>
  <div class="div-base" style="width:81% ; height:85vh ; border-radius:0px ; position:absolute ; left:16% ; text-align:center ; padding:1px 16px ; margin-top:0">
    <!--Username Display Div-->
    <div style="width:60vh ; height:10vh ; background-color:#818181 ; border-radius:15px ; font-size: 20px" id="center"> 
      <h1> Edit Personal Information </h1>
    </div>
  </div>
</div>

<div class="div-base" style="width:80% ; height:84vh ;  position:absolute ; left:16% ; text-align:center ; padding:1px 16px ; margin-top:0">
  <!--Username Display Div-->
  <div class="div-base" style="width:60vh ; height:10vh ; background-color:#818181 ; font-size: 20px; margin-left: 30%; text-align: center; border-radius: 35px ;"> 
    <h1> User's Profile </h1>
  </div>
  <!--User Information Div-->
  <div style="background-color:#e6e6e6 ; margin-top:3%  ; width:45%; height:auto ; margin-left: 27% ; border-radius: 35px ; color:black" >
    <br>
    <h1>Name:</h1>
    <h2><p id="name"></p></h2>
    <form action="/updateName" method="POST">
      <input class="form-register" type="text" id="fname" name="fname" placeholder="First Name" style="width: 210px ; margin-right: 10px" required>
      <input class="form-register" type="text" id="lname" name="lname" placeholder="Last Name" style="width: 210px ; margin-right: 10px" required>
      <br>
      <input class="btn" type="submit" value="Update" style="background-color:red">
    </form>
    <br>
    <h1>Phone Number:</h1>
    <h2><p id="phone"></p></h2>
    <form action="/updatePhone" method="POST">
      <input class="form-register" type="text" id="phone" name="phone" placeholder="Update Phone" style="width: 210px ; margin-right: 10px" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" required>
      <input class="btn" type="submit" value="Update" style="background-color:red">
    </form>
    <br>
    <h1>Subscribed for Promotions:</h1>
    <form action="/updatePromotion" method="POST">
        <input class="form-check-input" type="checkbox" style="width: 4vh; height: 4vh;" id="promotions" name="promotions">
        <input class="btn" type="submit" value="Update" style="background-color:red ; margin-left: 35px ; margin-top: 6px">
        <br><br><br>
    </form>
    <h1>Password:</h1>
    <form action="/updatePassword" method="POST">
      <input class="form-register" type="password" id="currentPassword" name="currentPassword" placeholder="Current Password" style="text-align: center ; width: 300px ; margin-bottom: 5px" required><br>
      <input class="form-register" type="password" id="newPassword" name="newPassword" placeholder="New Password" style="text-align: center ; width: 300px ; margin-bottom: 5px" required><br>
      <input class="form-register" type="password" id="confirmNewPassword" name="confirmNewPassword" placeholder="Confirm New Password" style="text-align: center ; width: 330px ; margin-bottom: 5px" required><br>
      <input class="btn" type="submit" value="Update" style="background-color:red">
    </form>
    <br>
  </div>
  <!--User Home Adress Div-->
  <div style="color:black ; background-color:#e6e6e6 ; padding:15px 0px 15px 0px ; width:48% ; height:auto ; margin-left: 26% ; border-radius: 35px; margin-top: 3%;" >
    <form action="/updateHomeAddress" method="POST">
      <a style="width:55%"><h1>Home/Mailing Address:</h1></a>
      <h2><p id="street">None</p></h2>
      <input class="form-register" type="text" id="street" name="street" placeholder="Update Street" style="width: 210px ; margin-right: 10px" required>
      <a style="width:30%"><h1>City:</h1></a>
      <h2><p id="city">None</p></h2>
      <input class="form-register" type="text" id="city" name="city" placeholder="Update City" style="width: 210px ; margin-right: 10px" required>
      <a style="width:30%">
        <h1>State:</h1>
      </a>
      <h2><p id="state">None</p></h2>
      <select class="form-register" style="width:50%" id="state" name="state">
				<option value="AL">AL</option>
				<option value="AK">AK</option>
				<option value="AR">AR</option>
				<option value="AZ">AZ</option>
				<option value="CA">CA</option>
				<option value="CO">CO</option>
				<option value="CT">CT</option>
				<option value="DC">DC</option>
				<option value="DE">DE</option>
				<option value="FL">FL</option>
				<option value="GA">GA</option>
				<option value="HI">HI</option>
				<option value="IA">IA</option>
				<option value="ID">ID</option>
				<option value="IL">IL</option>
				<option value="IN">IN</option>
				<option value="KS">KS</option>
				<option value="KY">KY</option>
				<option value="LA">LA</option>
				<option value="MA">MA</option>
				<option value="MD">MD</option>
				<option value="ME">ME</option>
				<option value="MI">MI</option>
				<option value="MN">MN</option>
				<option value="MO">MO</option>
				<option value="MS">MS</option>
				<option value="MT">MT</option>
				<option value="NC">NC</option>
				<option value="NE">NE</option>
				<option value="NH">NH</option>
				<option value="NJ">NJ</option>
				<option value="NM">NM</option>
				<option value="NV">NV</option>
				<option value="NY">NY</option>
				<option value="ND">ND</option>
				<option value="OH">OH</option>
				<option value="OK">OK</option>
				<option value="OR">OR</option>
				<option value="PA">PA</option>
				<option value="RI">RI</option>
				<option value="SC">SC</option>
				<option value="SD">SD</option>
				<option value="TN">TN</option>
				<option value="TX">TX</option>
				<option value="UT">UT</option>
				<option value="VT">VT</option>
				<option value="VA">VA</option>
				<option value="WA">WA</option>
				<option value="WI">WI</option>
				<option value="WV">WV</option>
				<option value="WY">WY</option>
			</select>
      <a style="width:30%"><h1>ZIP: (xxxxx)</h1></a>
      <h2><p id="zip">None</p></h2>
      <input class="form-register" type="text" id="zip" name="zip" placeholder="Update ZIP" style="width: 210px ; margin-right: 10px"  pattern="[0-9]{5}" required><br><br>
      <input class="btn" type="submit" value="Update" style="background-color:red">
    </form>
  </div>
  </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.1.min.js"
  integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
  crossorigin="anonymous"></script>

  <script>
    $(document).ready(function() {
      $.ajax( {
        url: "/isLoggedIn",
        type: "GET",
        success: function(result) {
          if (result.status == true) $('#loginButton').remove();
          else $('#profileButton').remove();
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
          console.log('failure');
        }
      });
    });
  </script>

  <script>
    $(document).ready(function() {
      $.ajax( {
        url: "/userInfo",
        type: "GET",
        success: function(result) {
          $("#name").html(result.first_name + ' ' + result.last_name);
          $("#phone").html(result.phone_num);
          $("#email").html(result.email);
          if (result.promo_subs == 'Y') $("#promotions").prop("checked", 1);
          else $("#promotions").prop("checked", 0);
          $.ajax( {
            url: "/getAddress",
            dataType: 'json',
            type: "POST",
            contentType: 'application/x-www-form-urlencoded',
            data: $.param({id: result.home_address_id}),
            processData: false,
            success: function(result2) {
              $("#street").html(result2.street);
              $("#city").html(result2.city);
              $("#state").html(result2.state);
              $("#zip").html(result2.zipcode);
          }});
      }});
    });
  </script>
</body>
</html>
